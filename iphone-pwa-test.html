<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- iOS PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="English Learning">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-touch-icon-180x180.svg">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/apple-touch-icon-ipad-152x152.svg">
    <link rel="apple-touch-icon" sizes="120x120" href="./icons/apple-touch-icon-iphone-120x120.svg">
    <link rel="apple-touch-icon" href="./icons/apple-touch-icon-180x180.svg">
    
    <title>iPhone PWA Test - English Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: white;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        
        .status {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 14px;
        }
        
        .status-icon {
            margin-right: 10px;
            font-size: 16px;
        }
        
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .warning { color: #fbbf24; }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 8px 0;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .install-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            font-size: 18px;
            padding: 15px 30px;
            margin: 20px 0;
        }
        
        .footer {
            margin-top: 30px;
            font-size: 12px;
            opacity: 0.7;
        }
        
        .pwa-instructions {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .step-number {
            background: white;
            color: #667eea;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .step-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.4;
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .instructions {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon">üì±</div>
        <h1>iPhone PWA Test</h1>
        <p class="subtitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA –Ω–∞ iPhone</p>
        
        <div class="status" id="status">
            <div class="status-item">
                <span class="status-icon">‚è≥</span>
                <span>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å...</span>
            </div>
        </div>
        
        <div class="pwa-instructions">
            <h3>üìã –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ iPhone:</h3>
            
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-text">–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç —Å–∞–π—Ç –≤ <strong>Safari</strong> (–ù–ï –≤ Chrome –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö)</div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-text">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"</strong> (–∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π –≤–≤–µ—Ä—Ö) –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞</div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-text">–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –∏ –Ω–∞–π–¥–∏—Ç–µ <strong>"–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"</strong></div>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-text">–ù–∞–∂–º–∏—Ç–µ <strong>"–î–æ–±–∞–≤–∏—Ç—å"</strong></div>
            </div>
            
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-text">–ù–∞–π–¥–∏—Ç–µ –∏–∫–æ–Ω–∫—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ iPhone –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
            </div>
        </div>
        
        <button class="button install-button" onclick="checkPWAStatus()">üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
        <button class="button" onclick="window.location.href='./index.html'">üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</button>
        
        <div class="footer">
            <p>English Learning PWA v1.2.0</p>
            <p>–ë–µ–∑ –¥–∏–∞–ª–æ–≥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</p>
        </div>
    </div>
    
    <script>
        function checkPWAStatus() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º HTTPS
            const isHTTPS = location.protocol === 'https:';
            addStatusItem(isHTTPS ? '‚úÖ' : '‚ùå', 
                isHTTPS ? 'HTTPS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ' : '–ù–ï HTTPS - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è PWA');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º Safari
            const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            addStatusItem(isSafari ? '‚úÖ' : '‚ö†Ô∏è', 
                isSafari ? 'Safari –±—Ä–∞—É–∑–µ—Ä' : '–ù–ï Safari - PWA —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Safari –Ω–∞ iOS');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º iOS
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            addStatusItem(isIOS ? '‚úÖ' : '‚ÑπÔ∏è', 
                isIOS ? 'iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ' : '–ù–µ iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º Service Worker
            if ('serviceWorker' in navigator) {
                addStatusItem('‚úÖ', 'Service Worker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            } else {
                addStatusItem('‚ùå', 'Service Worker –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç
            fetch('./manifest.json')
                .then(response => {
                    if (response.ok) {
                        addStatusItem('‚úÖ', 'Manifest.json –¥–æ—Å—Ç—É–ø–µ–Ω');
                    } else {
                        addStatusItem('‚ùå', 'Manifest.json –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                })
                .catch(() => {
                    addStatusItem('‚ùå', 'Manifest.json –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∫–æ–Ω–∫–∏
            fetch('./icons/apple-touch-icon-180x180.svg')
                .then(response => {
                    if (response.ok) {
                        addStatusItem('‚úÖ', 'Apple Touch Icon –¥–æ—Å—Ç—É–ø–µ–Ω');
                    } else {
                        addStatusItem('‚ùå', 'Apple Touch Icon –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    }
                })
                .catch(() => {
                    addStatusItem('‚ùå', 'Apple Touch Icon –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ —É–∂–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            if (window.matchMedia('(display-mode: standalone)').matches) {
                addStatusItem('‚úÖ', 'PWA —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
            } else {
                addStatusItem('‚ÑπÔ∏è', 'PWA –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ - —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ');
            }
        }
        
        function addStatusItem(icon, text) {
            const statusDiv = document.getElementById('status');
            const item = document.createElement('div');
            item.className = 'status-item';
            item.innerHTML = `<span class="status-icon">${icon}</span><span>${text}</span>`;
            statusDiv.appendChild(item);
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', checkPWAStatus);
        
        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(registration => {
                    console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration);
                })
                .catch(error => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                });
        }
    </script>
</body>
</html>
